!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("flipbook",[],e):"object"==typeof exports?exports.flipbook=e():t.flipbook=e()}(self,(function(){return(()=>{var t={194:t=>{"use strict";function e(t){let e=document.createElement(t.tag);return n(e),e.attr(t.attr),e.add(t.children),e}function n(t){if(t)return t.c=function(){return 1===arguments.length&&"string"==typeof arguments[0]?t.innerHTML=arguments[0]:(t.innerHTML="",arguments.length&&s(t,Array.prototype.slice.call(arguments))),t},t.attr=e=>i(t,e),t.add=e=>s(t,e),t.rm=e=>t.removeChild(e),t.addClass=e=>function(t,e){if(t.classList&&t.classList.add)return t.classList.add(e);const n=t.getAttribute("class");n?t.setAttribute("class",`${n} ${e}`):t.setAttribute("class",e)}(t,e),t.rmClass=e=>function(t,e){if(t.classList&&t.classList.remove)return t.classList.remove(e);const n=t.getAttribute("class");if(!n)return;const o=n.split(" ").filter((t=>t!==e)).join(" ");t.setAttribute("class",o)}(t,e),t}function o(t,e,n,o){const r={tag:null,attr:{},children:[]};return i(e),i(n),i(o),r;function i(e){if(!r.tag){if(!e)return void(r.tag=t);if("string"==typeof e)return void(r.tag=e);r.tag=t}e&&(Array.isArray(e)||l(e)||"string"==typeof e||"number"==typeof e?r.children=r.children.concat(e):r.attr=Object.assign(r.attr,e))}}function r(t,e,n){n.class&&n.classes?n.class+=" "+n.classes:n.classes?n.class=n.classes:n.class||(n.class=""),delete n.classes;let o=(e=e.replace(/#/g,".#")).split(".");(e=o.shift())||(e=t);for(let t=0;t<o.length;t++)"#"==o[t][0]?n.id||(n.id=o[t].substring(1)):n.class+=" "+o[t];return n.class||delete n.class,e}function i(t,e){if(e)for(let n in e)if("class"===n||"classes"===n){if(e[n]){const o=t.getAttribute("class");let r=e[n].trim().split(/[ \t]+/g).join(" ");o&&(r+=" "+o),t.setAttribute("class",r)}}else if("style"===n){let o=e[n];if("string"==typeof o)t.style.cssText=o;else for(let e in o)t.style.setProperty(e,o[e])}else n.startsWith("on")?t.addEventListener(n.substring(2).toLowerCase(),e[n]):!1===e[n]?t.removeAttribute(n):e[n]?t.setAttribute(n,e[n]):t.setAttribute(n,"")}function s(t,e){if(e){Array.isArray(e)||(e=[e]);for(let n=0;n<e.length;n++){let o=e[n];o&&(Array.isArray(o)?s(t,o):(l(o)||(o=document.createTextNode(o)),t.appendChild(o)))}}}function l(t){return t&&t.nodeName&&t.nodeType}function a(t,n){let i=o("div",t,n);return i.tag=r("div",i.tag,i.attr),(t,n,s)=>{let l=o("div",t,n,s);return l.tag=r("div",l.tag,l.attr),i.attr.class&&l.attr.class&&(l.attr.class=i.attr.class+" "+l.attr.class),i.attr.style&&l.attr.style&&typeof i.attr.style==typeof l.attr.style&&("string"==typeof i.attr.style?l.attr.style=i.attr.style+";"+l.attr.style:l.attr.style=Object.assign({},i.attr.style,l.attr.style)),l.attr=Object.assign({},i.attr,l.attr),e(l)}}t.exports={h:function(t,n,i){let s=o("div",t,n,i);return s.tag=r("div",s.tag,s.attr),e(s)},wrap:n,getH:function(t,e){return t instanceof Element?n(t):(e||(e=document),e.contentDocument&&(e=e.contentDocument),n(e.getElementById(t)))},x:a,div:a("div"),svg:function(t,e,l){let a,c=o("svg",t,e,l);if(c.tag=r("svg",c.tag,c.attr),"<"==c.tag[0]){a=document.createElementNS("http://www.w3.org/2000/svg","svg"),a.innerHTML=t;const e=a.getElementsByTagName("svg")[0];e&&(a=e)}else a=document.createElementNS("http://www.w3.org/2000/svg",c.tag),i(a,c.attr),s(a,c.children);return n(a),a}}},187:t=>{"use strict";var e,n="object"==typeof Reflect?Reflect:null,o=n&&"function"==typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};e=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var r=Number.isNaN||function(t){return t!=t};function i(){i.init.call(this)}t.exports=i,t.exports.once=function(t,e){return new Promise((function(n,o){function r(n){t.removeListener(e,i),o(n)}function i(){"function"==typeof t.removeListener&&t.removeListener("error",r),n([].slice.call(arguments))}g(t,e,i,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&g(t,"error",e,{once:!0})}(t,r)}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var s=10;function l(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function a(t){return void 0===t._maxListeners?i.defaultMaxListeners:t._maxListeners}function c(t,e,n,o){var r,i,s,c;if(l(n),void 0===(i=t._events)?(i=t._events=Object.create(null),t._eventsCount=0):(void 0!==i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),s=i[e]),void 0===s)s=i[e]=n,++t._eventsCount;else if("function"==typeof s?s=i[e]=o?[n,s]:[s,n]:o?s.unshift(n):s.push(n),(r=a(t))>0&&s.length>r&&!s.warned){s.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=t,f.type=e,f.count=s.length,c=f,console&&console.warn&&console.warn(c)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(t,e,n){var o={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=f.bind(o);return r.listener=n,o.wrapFn=r,r}function p(t,e,n){var o=t._events;if(void 0===o)return[];var r=o[e];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(r):d(r,r.length)}function h(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function d(t,e){for(var n=new Array(e),o=0;o<e;++o)n[o]=t[o];return n}function g(t,e,n,o){if("function"==typeof t.on)o.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function r(i){o.once&&t.removeEventListener(e,r),n(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t||t<0||r(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");s=t}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||r(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},i.prototype.getMaxListeners=function(){return a(this)},i.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var l=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw l.context=s,l}var a=i[t];if(void 0===a)return!1;if("function"==typeof a)o(a,this,e);else{var c=a.length,f=d(a,c);for(n=0;n<c;++n)o(f[n],this,e)}return!0},i.prototype.addListener=function(t,e){return c(this,t,e,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(t,e){return c(this,t,e,!0)},i.prototype.once=function(t,e){return l(e),this.on(t,u(this,t,e)),this},i.prototype.prependOnceListener=function(t,e){return l(e),this.prependListener(t,u(this,t,e)),this},i.prototype.removeListener=function(t,e){var n,o,r,i,s;if(l(e),void 0===(o=this._events))return this;if(void 0===(n=o[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete o[t],o.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,i=n.length-1;i>=0;i--)if(n[i]===e||n[i].listener===e){s=n[i].listener,r=i;break}if(r<0)return this;0===r?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,r),1===n.length&&(o[t]=n[0]),void 0!==o.removeListener&&this.emit("removeListener",t,s||e)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(t){var e,n,o;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,i=Object.keys(n);for(o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(o=e.length-1;o>=0;o--)this.removeListener(t,e[o]);return this},i.prototype.listeners=function(t){return p(this,t,!0)},i.prototype.rawListeners=function(t){return p(this,t,!1)},i.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):h.call(t,e)},i.prototype.listenerCount=h,i.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},178:t=>{t.exports='<svg viewBox="0 0 128 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;"><g id="heart" transform="matrix(4,0,0,1,0,0)"><rect x="0" y="0" width="32" height="32" style="fill:none;"></rect><g transform="matrix(0.223171,0,0,0.917689,0.785993,0.813137)"><path id="drawing" d="M16,6.4C19.368,0 26.105,0 29.474,3.2C32.842,6.4 32.842,12.8 29.474,19.2C27.116,24 21.053,28.8 16,32C10.947,28.8 4.884,24 2.526,19.2C-0.842,12.8 -0.842,6.4 2.526,3.2C5.895,0 12.632,0 16,6.4Z" style="stroke:rgb(235,235,235);stroke-width:2.21px;"></path></g><g transform="matrix(0.558974,0,0,2.2359,-14.1835,7.40918)"><text x="45.479px" y="8.137px" style="font-family:&#x27;ArialMT&#x27;, &#x27;Arial&#x27;, sans-serif;font-size:12px;fill:rgb(235,235,235);">L<tspan x="52.753px 56.687px 65.291px " y="8.137px 8.137px 8.137px ">IKE</tspan></text></g></g></svg>'},232:t=>{t.exports='<svg viewBox="0 0 156 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g transform="matrix(1,0,0,1,0,-45.043)"><g id="share" transform="matrix(4.875,0,0,1,0,45.043)"><rect x="0" y="0" width="32" height="32" style="fill:none;"></rect><g transform="matrix(0.458645,0,0,2.2359,-11.6377,7.40918)"><text x="45.479px" y="8.137px" style="font-family:&#x27;ArialMT&#x27;, &#x27;Arial&#x27;, sans-serif;font-size:12px;fill:rgb(235,235,235);">S<tspan x="54.083px 63.349px 71.953px 81.219px " y="8.137px 8.137px 8.137px 8.137px ">HARE</tspan></text></g><g id="border" transform="matrix(0.0118093,0,0,0.060335,1.06064,0.554244)"><path d="M25.18,462.375C23.353,461.444 20.653,459.103 19.18,457.173C16.657,453.87 16.48,452.925 16.155,441.082C15.723,425.312 17.571,384.749 19.531,366.961C24.689,320.151 35.564,285.863 54.117,257.915C62.749,244.912 82.29,225.478 95.556,216.703C121.434,199.586 155.085,187.596 194,181.626C208.819,179.352 218.402,178.416 247.25,176.425L256,175.82L256,118.311C256,54.432 255.789,56.551 262.683,51.293C267.155,47.882 274.236,47.175 278.765,49.688C284.389,52.809 492.63,245.7 494.398,249.427C496.437,253.724 496.435,258.281 494.39,262.589C492.613,266.334 284.411,459.184 278.768,462.312C274.234,464.824 267.155,464.118 262.682,460.707C255.788,455.448 256,457.578 256,393.599C256,339.408 255.896,336 254.25,336.005C247.615,336.022 217.397,338.314 207.5,339.55C149.93,346.742 109.51,364.787 83.3,395C73.881,405.857 62.713,423.181 53.117,441.819C47.025,453.651 43.802,458.812 41.325,460.701C36.963,464.028 29.866,464.764 25.18,462.375ZM373.89,332.186C418.775,290.763 455.5,256.477 455.5,255.995C455.5,255.513 417.925,220.426 372,178.023L288.5,100.927L287.5,197.658L284.806,201.188C280.281,207.119 277.887,207.682 254.278,208.37C202.224,209.886 164.894,217.108 134.131,231.614C82.174,256.112 56.413,300.671 50.403,376.44L49.694,385.38L57.597,375.99C88.114,339.729 132.394,318.345 196.211,309.046C216.288,306.12 235.339,304.745 257.564,304.616L277.628,304.5L281.173,307.194C288.126,312.476 288,311.423 288,364.056L288,411.31L290.14,409.405C291.316,408.357 329.004,373.608 373.89,332.186Z" style="fill:rgb(235,235,235);fill-rule:nonzero;"></path></g><g id="fill" transform="matrix(0.0118093,0,0,0.060335,1.06064,0.554244)"><path d="M373.89,332.186C418.775,290.763 455.5,256.477 455.5,255.995C455.5,255.513 417.925,220.426 372,178.023L288.5,100.927L287.5,197.658L284.806,201.188C280.281,207.119 277.887,207.682 254.278,208.37C202.224,209.886 164.894,217.108 134.131,231.614C82.174,256.112 56.413,300.671 50.403,376.44L49.694,385.38L57.597,375.99C88.114,339.729 132.394,318.345 196.211,309.046C216.288,306.12 235.339,304.745 257.564,304.616L277.628,304.5L281.173,307.194C288.126,312.476 288,311.423 288,364.056L288,411.31L290.14,409.405C291.316,408.357 329.004,373.608 373.89,332.186Z" style="fill-rule:nonzero;"></path></g></g></g></svg>'},610:t=>{t.exports='<svg viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g transform="matrix(1,0,0,1,0,-88.7776)"><g id="zoom" transform="matrix(1,0,0,1,0,88.7776)"><rect x="0" y="0" width="32" height="32" style="fill:none;"></rect><g transform="matrix(5.74607,0,0,1.22583,-7.44566,-3.61325)"><g id="path236" transform="matrix(0.0110823,0,0,0.0519482,1.2451,2.67374)"><path d="M425,495.012C414.065,493.529 405.885,490.365 395.672,483.666C392.866,481.826 378.952,467.518 362.445,449.5C346.826,432.45 323.878,407.475 311.45,394C299.022,380.525 285.581,365.45 281.581,360.5C271.011,347.419 272.747,348.019 260.764,353.311C247.945,358.972 237.433,362.258 222.862,365.159C213.575,367.007 208.121,367.425 193,367.447C173.09,367.476 166.335,366.641 148.226,361.907C105.228,350.668 66.858,322.372 43.263,284.5C0.598,216.02 9.23,128.744 64.357,71.236C89.386,45.125 120.412,28.042 156.942,20.258C168.439,17.808 171.401,17.582 192,17.582C212.617,17.582 215.555,17.807 227.102,20.267C243.854,23.836 254.653,27.671 271.5,36.035C289.697,45.07 301.708,53.723 316.564,68.5C338.687,90.505 352.762,114.281 361.414,144.264C366.285,161.143 367.418,170.048 367.426,191.5C367.438,222.803 364.13,237.308 349.387,270.603C349.118,271.21 354.909,277.06 362.255,283.603C369.601,290.146 382.336,301.661 390.555,309.192C398.775,316.722 422.247,337.986 442.715,356.446C469.924,380.984 481.069,391.684 484.165,396.244C497.76,416.263 499.064,441.512 487.638,463.5C483.073,472.284 471.344,483.612 462,488.261C450.242,494.111 436.647,496.591 425,495.012Z" style="fill:rgb(235,235,235);fill-rule:nonzero;"></path></g><g transform="matrix(0.368872,0,0,1.72062,-2.60359,-160.615)"><circle cx="16.179" cy="100.644" r="4.133"></circle></g></g></g></g></svg>'},385:(t,e,n)=>{"use strict";n.r(e),n.d(e,{init:()=>p});var o=n(187),r=n(194),i=n(178),s=n.n(i),l=n(232),a=n.n(l),c=n(610),f=n.n(c);class u extends o{}function p(t,e,n,o){"function"==typeof n&&(o=n,n={}),n||(n={}),o||(o=()=>1);const i=(0,r.getH)(e),l=new u;l.version="1.2.1";const c={color:{bg:n.backgroundColor||"#353535",bx:n.boxColor||"#353535",tb:n.toolbarColor||"#353535",tbs:n.toolbarSeparator||"#9e9e9e"},sz:{bx_border:n.boxBorder||4,boxw:n.width||800,boxh:n.height||600,tbh:n.toolbarSize||24},app:i,book:t,viewer:l};!function(t,e){const n={e:(0,r.h)("canvas",{style:{display:"block",margin:"0",padding:"0"}})};n.ctx=n.e.getContext("2d"),n.e.width=t.sz.boxw,n.e.height=t.sz.boxh,t.canvas=n,t.book.getPage(1,((n,o)=>{if(n)return e(n);!function(t,e,n){let o=.8*t.sz.boxh,r=2*e.width*(o/e.height);const i=.8*t.sz.boxw;r>i&&(r=i,o=e.height*(r/(2*e.width)));n({top:(t.sz.boxh-o)/2,left:(t.sz.boxw-r)/2,mid:t.sz.boxw/2,width:r,height:o})}(t,o,(n=>{t.layout=n,e()}))}))}(c,(t=>{if(t)return o(t);!function(t,e){const n=t.sz.tbh+"px",o=.6*t.sz.tbh+"px",i=.75*t.sz.tbh+"px",l=(0,r.h)(".toolbar",{style:{"box-sizing":"border-box",width:t.sz.boxw+"px",margin:"0",padding:"8px",background:t.color.tb,color:"#eee","font-size":n,"line-height":n,position:"relative","border-top":`1px solid ${t.color.tbs}`}}),c=function(){return{e:(0,r.h)("span",{onclick:e}," > "),onclick:e};function e(){t.flipNdx||2*t.showNdx+1>=t.book.numPages()||(t.flipNdx=t.showNdx+1,v(),y())}}(),u=function(){return{e:(0,r.h)("span",{onclick:e}," < "),onclick:e};function e(){t.flipNdx||!t.showNdx||t.book.numPages()<=1||(t.flipNdx=t.showNdx-1,v(),y())}}();v();const p=function(){const e=(0,r.svg)(f());return e.attr({height:i,onclick:n,style:{cursor:"pointer",cursor:"zoom-in","user-select":"none","padding-right":i,opacity:.8},onmouseenter:()=>e.attr({style:{opacity:1}}),onmouseleave:()=>e.attr({style:{opacity:.8}})}),{e,onclick:n};function n(e){e=Number(e),isNaN(e)&&(e=2*t.zoom+1)>4&&(e=0),e?m({draw:e=>{t.zoom=e.zoom,x(t)},duration:500,from:{zoom:t.zoom},to:{zoom:e},timing:t=>t*t*(3-2*t)}):(t.zoom=0,t.pan=null,x(t))}}(),h=function(){let e=!1;const n=(0,r.svg)(s());n.attr({height:o,onclick:l,style:{cursor:"pointer","padding-right":"8px",opacity:.8},onmouseenter:()=>n.attr({style:{opacity:1}}),onmouseleave:()=>n.attr({style:{opacity:.8}})});const i=(0,r.getH)("drawing",n);return{e:n,onclick:l};function l(n){e=n&&"object"!=typeof n?n:!e,t.viewer.emit("liked",e);const o=e?"red":"#eee";i.attr({style:{fill:o}})}}(),d=function(){const e=(0,r.svg)(a());return e.attr({height:o,onclick:n,style:{cursor:"pointer","padding-right":"8px",opacity:.8},onmouseenter:()=>e.attr({style:{opacity:1}}),onmouseleave:()=>e.attr({style:{opacity:.8}})}),{e,onclick:n};function n(){t.viewer.emit("shared");const e=window.location.href;prompt("Copy this link to share",e)}}();function v(){const e={cursor:"pointer","user-select":"none",opacity:"1"},n={cursor:"not-allowed","user-select":"none",opacity:"0.5"};if(void 0!==t.flipNdx&&null!==t.flipNdx)return u.e.attr({style:n}),void c.e.attr({style:n});!t.showNdx||t.book.numPages()<=1?u.e.attr({style:n}):u.e.attr({style:e}),2*t.showNdx+1>=t.book.numPages()?c.e.attr({style:n}):c.e.attr({style:e})}function y(){m({draw:e=>{t.flipFrac=e.flipFrac,function(t){x(t);const e=t.canvas,n=2*t.flipNdx,o=n+1,r=g(t),i=.5-Math.abs(.5-t.flipFrac);function s(n,o){e.ctx.fillStyle=n;const r=t.sz.bx_border;e.ctx.fillRect(o.left-r,o.top-r,o.width+2*r,o.height+2*r)}function l(t,e){const n=t.sz.bx_border;return{left:e.left-n,top:e.top-n,width:e.width+2*n,height:e.height+2*n}}e.ctx.save(),t.book.getPage(n,((n,a)=>{if(n)return console.error(n);t.book.getPage(o,((n,o)=>{if(n)return console.error(n);!function(n,o,a,c){let f,u,p,h,d,g,x,m,v;if(t.showNdx<t.flipNdx){f=Object.assign({},r),f.width/=2,f.left=r.mid,u=f.left+(1-a)*f.width,p=f.width*a,d=l(t,f),e.ctx.save(),h=new Path2D,h.rect(u,d.top,p,d.height),e.ctx.clip(h),o?e.ctx.drawImage(o.img,f.left,f.top,f.width,f.height):s(t.zoom?t.color.bg:t.color.bx,d),e.ctx.restore(),f=Object.assign({},r),f.left+=(1-a)*f.width,f.width/=2,p=f.width*a,g=f.height,x=f.top,f.height*=1+.1*i,f.top-=(f.height-g)/2,e.ctx.save(),h=new Path2D,h.moveTo(f.left,x),h.lineTo(f.left,x+g),m={x:f.left+p/2,y:f.top+f.height},v={x:f.left+p,y:x+g},h.quadraticCurveTo(m.x,m.y,v.x,v.y),h.lineTo(v.x,x),m={x:f.left+p,y:f.top},v={x:f.left,y:x},h.quadraticCurveTo(m.x,m.y,v.x,v.y),e.ctx.clip(h),e.ctx.drawImage(n.img,f.left,f.top,f.width,f.height),e.ctx.restore(),e.ctx.save();const c=f.width/2*Math.max(Math.min(i,.5),0);e.ctx.strokeStyle="rgba(0,0,0,"+.1*i+")",e.ctx.lineWidth=30*i,e.ctx.beginPath(),e.ctx.moveTo(f.left,x),e.ctx.lineTo(f.left,x+g),e.ctx.stroke();let y=e.ctx.createLinearGradient(f.left+p,x,f.left+p+c,x);y.addColorStop(0,"rgba(0,0,0,"+.3*i+")"),y.addColorStop(.8,"rgba(0,0,0,0.0)"),e.ctx.fillStyle=y,e.ctx.fillRect(f.left+p,x,p+c,g),e.ctx.restore()}else{f=Object.assign({},r),f.width/=2,p=f.width*a+t.sz.bx_border,d=l(t,f),e.ctx.save(),h=new Path2D,h.rect(d.left,d.top,p,d.height),e.ctx.clip(h),n?e.ctx.drawImage(n.img,f.left,f.top,f.width,f.height):s(t.zoom?t.color.bg:t.color.bx,f),e.ctx.restore(),f=Object.assign({},r),f.width/=2,u=f.left+a*f.width,f.left=u-(1-a)*f.width,p=f.width*a,g=f.height,x=f.top,f.height*=1+.1*i,f.top-=(f.height-g)/2,e.ctx.save(),h=new Path2D,h.moveTo(u,x),h.lineTo(u,x+g),m={x:u+p/2,y:f.top+f.height},v={x:u+p,y:x+g},h.quadraticCurveTo(m.x,m.y,v.x,v.y),h.lineTo(v.x,x),m={x:u+p,y:f.top},v={x:u,y:x},h.quadraticCurveTo(m.x,m.y,v.x,v.y),e.ctx.clip(h),e.ctx.drawImage(o.img,f.left,f.top,f.width,f.height),e.ctx.restore(),e.ctx.save();const c=f.width/2*Math.max(Math.min(i,.5),0);e.ctx.strokeStyle="rgba(0,0,0,"+.1*i+")",e.ctx.lineWidth=30*i,e.ctx.beginPath(),e.ctx.moveTo(u+p,x),e.ctx.lineTo(u+p,x+g),e.ctx.stroke();let y=e.ctx.createLinearGradient(u,x,u-c,x);y.addColorStop(0,"rgba(0,0,0,"+.3*i+")"),y.addColorStop(.8,"rgba(0,0,0,0.0)"),e.ctx.fillStyle=y,e.ctx.fillRect(u-c,x,c,g),e.ctx.restore()}c()}(a,o,t.flipFrac,(()=>e.ctx.restore()))}))}))}(t)},duration:1111,from:{flipFrac:0},to:{flipFrac:1},timing:t=>t*t*(3-2*t),ondone:()=>{t.showNdx=t.flipNdx,t.flipNdx=null,v(),x(t)}})}l.c((0,r.h)("div",{style:{position:"absolute"}},[h.e,d.e]),(0,r.h)("div",{style:{position:"absolute",right:"0"}},[p.e]),(0,r.h)("div",{style:{"text-align":"center"}},[u.e,c.e])),t.toolbar={e:l,nav:{nextPage:c.onclick,prevPage:u.onclick},zoom:p.onclick,heart:h.onclick,share:d.onclick},e()}(c,(t=>{if(t)return o(t);i.c(c.canvas.e,c.toolbar.e),function(t){const e=[h(t)],n={};["onmouseenter","onmouseleave","onmousemove","onclick","onmousedown","onmouseup"].map((t=>{n[t]=n=>{e.map((e=>{e[t]&&e[t](n)}))}})),t.app.attr(n)}(c),c.zoom=0,c.showNdx=0,l.nav=c.toolbar.nav,l.zoom=c.toolbar.zoom,l.like=c.toolbar.heart,l.share=c.toolbar.share,o(null,l),x(c)}))}))}function h(t){let e;return{onmouseleave:function(t){e=null},onmousedown:function(n){t.zoom&&(e=d(t,n),t.pan&&(e.x-=t.pan.x,e.y-=t.pan.y))},onmouseup:function(t){e=null},onmousemove:function(n){const o=d(t,n);e&&function(t,e){const n=function(t){const e=g(t);return{top:e.top,left:e.left,bottom:e.top+e.height,right:e.left+e.width}}(t);return n.top<=e.y&&n.bottom>=e.y&&n.left<=e.x&&n.right>=e.x}(t,o)?(t.pan={x:o.x-e.x,y:o.y-e.y},x(t)):e=null}}}function d(t,e){const n=t.app.getBoundingClientRect();return{x:e.clientX-n.x,y:e.clientY-n.y}}function g(t){let e=t.layout;if(t.zoom>0){if(e=Object.assign({},e),t.zoom){const n=.5*t.zoom;e.left=e.left-e.width*n/2,e.top=e.top-e.height*n/2,e.width=e.width*(1+n),e.height=e.height*(1+n)}t.pan&&(e.left+=t.pan.x,e.top+=t.pan.y,e.mid+=t.pan.x)}return e}function x(t){const e=t.canvas,n=2*t.showNdx,o=n+1;function r(t,n){e.ctx.drawImage(t.img,n.left,n.top,n.width,n.height)}e.ctx.save(),e.ctx.fillStyle=t.color.bg,e.ctx.fillRect(0,0,t.sz.boxw,t.sz.boxh),t.book.getPage(n,((i,s)=>{if(i)return console.error(i);!t.flipNdx&&s&&t.viewer.emit("seen",n),t.book.getPage(o,((n,i)=>{if(n)return console.error(n);!t.flipNdx&&i&&t.viewer.emit("seen",o),function(n,o,i){const s=g(t);0==t.zoom&&function(n){e.ctx.fillStyle=t.color.bx;const o=t.sz.bx_border;e.ctx.fillRect(n.left-o,n.top-o,n.width+2*o,n.height+2*o)}(s);const l=Object.assign({},s),a=Object.assign({},s);l.width/=2,a.width/=2,a.left=s.mid,n&&r(n,l),o&&r(o,a),e.ctx.restore()}(s,i)}))}))}function m({draw:t,duration:e,from:n,to:o,timing:r,ondone:i}){i||(i=()=>1),r||(r=t=>t);const s=Date.now();!function l(){let a=(Date.now()-s)/e;a>1&&(a=1);const c=function(t){t=r(t);const e=Object.assign({},n);for(let r in n){const i=Number(n[r]),s=Number(o[r]);e[r]=i+(s-i)*t}return e}(a);t(c),1===a?i():requestAnimationFrame(l)}()}}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,n),i.exports}return n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(385)})()}));